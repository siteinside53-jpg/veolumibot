    li{margin:6px 0}
    .title{font-weight:800;font-size:18px}
    .sp{height:8px}
    .foot{font-size:12px;color:#7f8898;margin-top:6px}
  </style>
</head>
<body>
       <div class="muted">Τρέχον πακέτο</div>
      <div id="planBig" class="big" style="font-size:22px;margin:6px 0 10px">Free</div>
      <button class="btn" id="buyMore">Αγορά επιπλέον credits</button>
      <div class="foot">*Η αγορά εδώ είναι demo flow. Θα κουμπώσει Stripe/PayPal/crypto στο επόμενο βήμα.</div>
    </div>
 
    <div class="card">
      <div class="title">Συνδρομές</div>
      <div class="sp"></div>
      <div class="plans" id="plans"></div>
    </div>
 
    <div class="card">
      <div class="title">Πρόγραμμα συνεργατών</div>
      <div class="muted">Μοίρασε το link σου και πάρε ποσοστό.</div>
      <div class="sp"></div>
      <div class="pill" id="ref">Φόρτωση…</div>
      <div class="sp"></div>


           </div>
           <div class="pill">${p.price}</div>
         </div>
        <ul>${p.perks.map(x=>`<li><span class="check">✓</span> ${x}</li>`).join("")}</ul>
         <div class="sp"></div>
         <button class="btn primary" data-plan="${p.code}">Αγορά</button>
       `;
       root.appendChild(el);
     });
 
     root.querySelectorAll("button[data-plan]").forEach(btn=>{
       btn.addEventListener("click", ()=>{
         const plan = btn.getAttribute("data-plan");
         if (tg) tg.sendData(JSON.stringify({action:"buy_plan", plan}));
       });
     });
   }
 
   async function loadProfile(){
     const initData = tg?.initData || "";
     const res = await fetch("/api/me", {
       method:"POST",

     });
     document.getElementById("copyRef").onclick = async ()=>{
       await navigator.clipboard.writeText(data.referral_link || "");
       if (tg) tg.showPopup({title:"Έτοιμο", message:"Το link αντιγράφηκε.", buttons:[{type:"ok"}]});
     };

     document.getElementById("buyMore").onclick = ()=>{
   }
 
   renderPlans();
   loadProfile().catch(console.error);
</script>
</body>
</html>
